#include <stddef.h>
#include <stdio.h>
#include <p33EP256MU806.h>
#include "uLCD.h"
#include "uInit.h"
#include <string.h>
#define LCD_BUSY			BIT_6
/*
  (0) !(1) "(2) #(3) $(4) %(5) &(6) '(7) ((8) )(9) *(10) +(11) ,(12) -(13) .(14) /(15)
 0(16) 1(17) 2(18) 3(19) 4(20) 5(21) 6(22) 7(23) 8(24) 9(25) :(26) ;(27) <(28) =(29) >(30) ?(31)
 @(32) A(33) B(34) C(35) D(36) E(37) F(38) G(39) H(40) I(41) J(42) K(43) L(44) M(45) N(46) 0(47)
 P(48) Q(49) R(50) S(51) T(52) U(53) V(54) W(55) X(56) Y(57) Z(58) [(59) \(60) ](61) ^(62) _(63)
 `(64) a(65) b(66) c(67) d(68) e(69) f(70) g(71) h(72) i(73) j(74) k(75) l(76) m(77) n(78) o(79)
 p(80) q(81) r(82) s(83) t(84) u(85) v(86) w(87) x(88) y(89) z(90) {(91) |(92) }(93) ~(94)  (95)
*/
static char Char16_8[][16]__attribute__((space(psv)))={
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*" ",0*/

{0x00,0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x18,0x18,0x00,0x00},/*"!",1*/

{0x00,0x12,0x36,0x24,0x48,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*""",2*/

{0x00,0x00,0x00,0x24,0x24,0x24,0xFE,0x48,0x48,0x48,0xFE,0x48,0x48,0x48,0x00,0x00},/*"#",3*/

{0x00,0x00,0x10,0x38,0x54,0x54,0x50,0x30,0x18,0x14,0x14,0x54,0x54,0x38,0x10,0x10},/*"$",4*/

{0x00,0x00,0x00,0x44,0xA4,0xA8,0xA8,0xA8,0x54,0x1A,0x2A,0x2A,0x2A,0x44,0x00,0x00},/*"%",5*/

{0x00,0x00,0x00,0x30,0x48,0x48,0x48,0x50,0x6E,0xA4,0x94,0x88,0x89,0x76,0x00,0x00},/*"&",6*/

{0x00,0x60,0x60,0x20,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"'",7*/

{0x00,0x02,0x04,0x08,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0x08,0x08,0x04,0x02,0x00},/*"(",8*/

{0x00,0x40,0x20,0x10,0x10,0x08,0x08,0x08,0x08,0x08,0x08,0x10,0x10,0x20,0x40,0x00},/*")",9*/

{0x00,0x00,0x00,0x00,0x10,0x10,0xD6,0x38,0x38,0xD6,0x10,0x10,0x00,0x00,0x00,0x00},/*"*",10*/

{0x00,0x00,0x00,0x00,0x10,0x10,0x10,0x10,0xFE,0x10,0x10,0x10,0x10,0x00,0x00,0x00},/*"+",11*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x60,0x20,0xC0},/*",",12*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"-",13*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x60,0x00,0x00},/*".",14*/

{0x00,0x00,0x01,0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x40,0x40,0x00},/*"/",15*/

{0x00,0x00,0x00,0x18,0x24,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x24,0x18,0x00,0x00},/*"0",16*/

{0x00,0x00,0x00,0x10,0x70,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00},/*"1",17*/

{0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x04,0x04,0x08,0x10,0x20,0x42,0x7E,0x00,0x00},/*"2",18*/

{0x00,0x00,0x00,0x3C,0x42,0x42,0x04,0x18,0x04,0x02,0x02,0x42,0x44,0x38,0x00,0x00},/*"3",19*/

{0x00,0x00,0x00,0x04,0x0C,0x14,0x24,0x24,0x44,0x44,0x7E,0x04,0x04,0x1E,0x00,0x00},/*"4",20*/

{0x00,0x00,0x00,0x7E,0x40,0x40,0x40,0x58,0x64,0x02,0x02,0x42,0x44,0x38,0x00,0x00},/*"5",21*/

{0x00,0x00,0x00,0x1C,0x24,0x40,0x40,0x58,0x64,0x42,0x42,0x42,0x24,0x18,0x00,0x00},/*"6",22*/

{0x00,0x00,0x00,0x7E,0x44,0x44,0x08,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},/*"7",23*/

{0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x24,0x18,0x24,0x42,0x42,0x42,0x3C,0x00,0x00},/*"8",24*/

{0x00,0x00,0x00,0x18,0x24,0x42,0x42,0x42,0x26,0x1A,0x02,0x02,0x24,0x38,0x00,0x00},/*"9",25*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00},/*":",26*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x20},/*";",27*/

{0x00,0x00,0x00,0x02,0x04,0x08,0x10,0x20,0x40,0x20,0x10,0x08,0x04,0x02,0x00,0x00},/*"<",28*/

{0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,0x00},/*"=",29*/

{0x00,0x00,0x00,0x40,0x20,0x10,0x08,0x04,0x02,0x04,0x08,0x10,0x20,0x40,0x00,0x00},/*">",30*/

{0x00,0x00,0x00,0x3C,0x42,0x42,0x62,0x02,0x04,0x08,0x08,0x00,0x18,0x18,0x00,0x00},/*"?",31*/

{0x00,0x00,0x00,0x38,0x44,0x5A,0xAA,0xAA,0xAA,0xAA,0xB4,0x42,0x44,0x38,0x00,0x00},/*"@",32*/

{0x00,0x00,0x00,0x10,0x10,0x18,0x28,0x28,0x24,0x3C,0x44,0x42,0x42,0xE7,0x00,0x00},/*"A",33*/

{0x00,0x00,0x00,0xF8,0x44,0x44,0x44,0x78,0x44,0x42,0x42,0x42,0x44,0xF8,0x00,0x00},/*"B",34*/

{0x00,0x00,0x00,0x3E,0x42,0x42,0x80,0x80,0x80,0x80,0x80,0x42,0x44,0x38,0x00,0x00},/*"C",35*/

{0x00,0x00,0x00,0xF8,0x44,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x44,0xF8,0x00,0x00},/*"D",36*/

{0x00,0x00,0x00,0xFC,0x42,0x48,0x48,0x78,0x48,0x48,0x40,0x42,0x42,0xFC,0x00,0x00},/*"E",37*/

{0x00,0x00,0x00,0xFC,0x42,0x48,0x48,0x78,0x48,0x48,0x40,0x40,0x40,0xE0,0x00,0x00},/*"F",38*/

{0x00,0x00,0x00,0x3C,0x44,0x44,0x80,0x80,0x80,0x8E,0x84,0x44,0x44,0x38,0x00,0x00},/*"G",39*/

{0x00,0x00,0x00,0xE7,0x42,0x42,0x42,0x42,0x7E,0x42,0x42,0x42,0x42,0xE7,0x00,0x00},/*"H",40*/

{0x00,0x00,0x00,0x7C,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00},/*"I",41*/

{0x00,0x00,0x00,0x3E,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x88,0xF0},/*"J",42*/

{0x00,0x00,0x00,0xEE,0x44,0x48,0x50,0x70,0x50,0x48,0x48,0x44,0x44,0xEE,0x00,0x00},/*"K",43*/

{0x00,0x00,0x00,0xE0,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x42,0xFE,0x00,0x00},/*"L",44*/

{0x00,0x00,0x00,0xEE,0x6C,0x6C,0x6C,0x6C,0x54,0x54,0x54,0x54,0x54,0xD6,0x00,0x00},/*"M",45*/

{0x00,0x00,0x00,0xC7,0x62,0x62,0x52,0x52,0x4A,0x4A,0x4A,0x46,0x46,0xE2,0x00,0x00},/*"N",46*/

{0x00,0x00,0x00,0x18,0x24,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x24,0x18,0x00,0x00},/*"0",47*/

{0x00,0x00,0x00,0xFC,0x42,0x42,0x42,0x42,0x7C,0x40,0x40,0x40,0x40,0xE0,0x00,0x00},/*"P",48*/

{0x00,0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x82,0xB2,0xCA,0x4C,0x38,0x06,0x00},/*"Q",49*/

{0x00,0x00,0x00,0xFC,0x42,0x42,0x42,0x7C,0x48,0x48,0x44,0x44,0x42,0xE3,0x00,0x00},/*"R",50*/

{0x00,0x00,0x00,0x3E,0x42,0x42,0x40,0x20,0x18,0x04,0x02,0x42,0x42,0x7C,0x00,0x00},/*"S",51*/

{0x00,0x00,0x00,0xFE,0x92,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x38,0x00,0x00},/*"T",52*/

{0x00,0x00,0x00,0xE7,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00},/*"U",53*/

{0x00,0x00,0x00,0xE7,0x42,0x42,0x44,0x24,0x24,0x28,0x28,0x18,0x10,0x10,0x00,0x00},/*"V",54*/

{0x00,0x00,0x00,0xD6,0x92,0x92,0x92,0x92,0xAA,0xAA,0x6C,0x44,0x44,0x44,0x00,0x00},/*"W",55*/

{0x00,0x00,0x00,0xE7,0x42,0x24,0x24,0x18,0x18,0x18,0x24,0x24,0x42,0xE7,0x00,0x00},/*"X",56*/

{0x00,0x00,0x00,0xEE,0x44,0x44,0x28,0x28,0x10,0x10,0x10,0x10,0x10,0x38,0x00,0x00},/*"Y",57*/

{0x00,0x00,0x00,0x7E,0x84,0x04,0x08,0x08,0x10,0x20,0x20,0x42,0x42,0xFC,0x00,0x00},/*"Z",58*/

{0x00,0x1E,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x1E,0x00},/*"[",59*/

{0x00,0x00,0x40,0x40,0x20,0x20,0x10,0x10,0x10,0x08,0x08,0x04,0x04,0x04,0x02,0x02},/*"\",60*/

{0x00,0x78,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x78,0x00},/*"]",61*/

{0x00,0x1C,0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"^",62*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF},/*"_",63*/

{0x00,0x60,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"`",64*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x1E,0x22,0x42,0x42,0x3F,0x00,0x00},/*"a",65*/

{0x00,0x00,0x00,0xC0,0x40,0x40,0x40,0x58,0x64,0x42,0x42,0x42,0x64,0x58,0x00,0x00},/*"b",66*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1C,0x22,0x40,0x40,0x40,0x22,0x1C,0x00,0x00},/*"c",67*/

{0x00,0x00,0x00,0x06,0x02,0x02,0x02,0x1E,0x22,0x42,0x42,0x42,0x26,0x1B,0x00,0x00},/*"d",68*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x7E,0x40,0x40,0x42,0x3C,0x00,0x00},/*"e",69*/

{0x00,0x00,0x00,0x0F,0x11,0x10,0x10,0x7E,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00},/*"f",70*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x44,0x44,0x38,0x40,0x3C,0x42,0x42,0x3C},/*"g",71*/

{0x00,0x00,0x00,0xC0,0x40,0x40,0x40,0x5C,0x62,0x42,0x42,0x42,0x42,0xE7,0x00,0x00},/*"h",72*/

{0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x70,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00},/*"i",73*/

{0x00,0x00,0x00,0x0C,0x0C,0x00,0x00,0x1C,0x04,0x04,0x04,0x04,0x04,0x04,0x44,0x78},/*"j",74*/

{0x00,0x00,0x00,0xC0,0x40,0x40,0x40,0x4E,0x48,0x50,0x68,0x48,0x44,0xEE,0x00,0x00},/*"k",75*/

{0x00,0x00,0x00,0x70,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00},/*"l",76*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x49,0x49,0x49,0x49,0x49,0xED,0x00,0x00},/*"m",77*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xDC,0x62,0x42,0x42,0x42,0x42,0xE7,0x00,0x00},/*"n",78*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00},/*"o",79*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xD8,0x64,0x42,0x42,0x42,0x44,0x78,0x40,0xE0},/*"p",80*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1E,0x22,0x42,0x42,0x42,0x22,0x1E,0x02,0x07},/*"q",81*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xEE,0x32,0x20,0x20,0x20,0x20,0xF8,0x00,0x00},/*"r",82*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x42,0x40,0x3C,0x02,0x42,0x7C,0x00,0x00},/*"s",83*/

{0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x7C,0x10,0x10,0x10,0x10,0x10,0x0C,0x00,0x00},/*"t",84*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC6,0x42,0x42,0x42,0x42,0x46,0x3B,0x00,0x00},/*"u",85*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE7,0x42,0x24,0x24,0x28,0x10,0x10,0x00,0x00},/*"v",86*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xD7,0x92,0x92,0xAA,0xAA,0x44,0x44,0x00,0x00},/*"w",87*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x6E,0x24,0x18,0x18,0x18,0x24,0x76,0x00,0x00},/*"x",88*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE7,0x42,0x24,0x24,0x28,0x18,0x10,0x10,0xE0},/*"y",89*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x44,0x08,0x10,0x10,0x22,0x7E,0x00,0x00},/*"z",90*/

{0x00,0x03,0x04,0x04,0x04,0x04,0x04,0x08,0x04,0x04,0x04,0x04,0x04,0x04,0x03,0x00},/*"{",91*/

{0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08},/*"|",92*/

{0x00,0x60,0x10,0x10,0x10,0x10,0x10,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0x60,0x00},/*"}",93*/

{0x30,0x4C,0x43,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"~",94*/

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*" ",95*/

};
char ASCIITAB[][8]__attribute__((space(psv)))={
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,},/* " "0*/
{0x10,0x10,0x10,0x10,0x00,0x00,0x10,0x00,},/* "!"1*/
{0x28,0x28,0x28,0x00,0x00,0x00,0x00,0x00,},/* """2*/
{0x28,0x28,0x7c,0x28,0x7c,0x28,0x28,0x00,},/* "#"3*/
{0x10,0x3c,0x50,0x38,0x14,0x78,0x10,0x00,},/* "$"4*/
{0x60,0x64,0x08,0x10,0x20,0x4c,0x0c,0x00,},/* "%"5*/
{0x30,0x48,0x50,0x20,0x54,0x48,0x34,0x00,},/* "&"6*/
{0x30,0x10,0x20,0x00,0x00,0x00,0x00,0x00,},/* "'"7*/
{0x08,0x10,0x20,0x20,0x20,0x10,0x08,0x00,},/* "("8*/
{0x20,0x10,0x08,0x08,0x08,0x10,0x20,0x00,},/* ")"9*/
{0x00,0x10,0x54,0x38,0x54,0x10,0x00,0x00,},/* "*"10*/
{0x00,0x10,0x10,0x7c,0x10,0x10,0x00,0x00,},/* "+"11*/
{0x00,0x00,0x00,0x00,0x30,0x10,0x20,0x00,},/* ","12*/
{0x00,0x00,0x00,0x7c,0x00,0x00,0x00,0x00,},/* "-"13*/
{0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,},/* "."14*/
{0x00,0x04,0x08,0x10,0x20,0x40,0x00,0x00,},/* "/"15*/
{0x38,0x44,0x4c,0x54,0x64,0x44,0x38,0x00,},/* "0"16*/
{0x10,0x30,0x10,0x10,0x10,0x10,0x38,0x00,},/* "1"17*/
{0x38,0x44,0x04,0x08,0x10,0x20,0x7c,0x00,},/* "2"18*/
{0x7c,0x08,0x10,0x08,0x04,0x44,0x38,0x00,},/* "3"19*/
{0x08,0x18,0x28,0x48,0x7c,0x08,0x08,0x00,},/* "4"20*/
{0x7c,0x40,0x78,0x04,0x04,0x44,0x38,0x00,},/* "5"21*/
{0x18,0x20,0x40,0x78,0x44,0x44,0x38,0x00,},/* "6"22*/
{0x7c,0x04,0x08,0x10,0x10,0x10,0x10,0x00,},/* "7"23*/
{0x38,0x44,0x44,0x38,0x44,0x44,0x38,0x00,},/* "8"24*/
{0x38,0x44,0x44,0x3c,0x04,0x08,0x30,0x00,},/* "9"25*/
{0x00,0x30,0x30,0x00,0x30,0x30,0x00,0x00,},/* ":"26*/
{0x00,0x30,0x30,0x00,0x30,0x10,0x20,0x00,},/* ";"27*/
{0x08,0x10,0x20,0x40,0x20,0x10,0x08,0x00,},/* "<"28*/
{0x00,0x00,0x7c,0x00,0x7c,0x00,0x00,0x00,},/* "="29*/
{0x20,0x10,0x08,0x04,0x08,0x10,0x20,0x00,},/* ">"30*/
{0x38,0x44,0x04,0x08,0x10,0x00,0x10,0x00,},/* "?"31*/
{0x38,0x44,0x04,0x34,0x54,0x54,0x38,0x00,},/* "@"32*/
{0x38,0x44,0x44,0x44,0x7c,0x44,0x44,0x00,},/* "A"33*/
{0x78,0x24,0x24,0x38,0x24,0x24,0x78,0x00,},/* "B"34*/
{0x38,0x44,0x40,0x40,0x40,0x44,0x38,0x00,},/* "C"35*/
{0x78,0x24,0x24,0x24,0x24,0x24,0x78,0x00,},/* "D"36*/
{0x7c,0x40,0x40,0x7c,0x40,0x40,0x7c,0x00,},/* "E"37*/
{0x7c,0x40,0x40,0x78,0x40,0x40,0x40,0x00,},/* "F"38*/
{0x38,0x44,0x40,0x4c,0x44,0x44,0x3c,0x00,},/* "G"39*/
{0x44,0x44,0x44,0x7c,0x44,0x44,0x44,0x00,},/* "H"40*/
{0x38,0x10,0x10,0x10,0x10,0x10,0x38,0x00,},/* "I"41*/
{0x1c,0x08,0x08,0x08,0x08,0x48,0x30,0x00,},/* "J"42*/
{0x44,0x48,0x50,0x60,0x50,0x48,0x44,0x00,},/* "K"43*/
{0x40,0x40,0x40,0x40,0x40,0x40,0x7c,0x00,},/* "L"44*/
{0x44,0x6c,0x54,0x54,0x44,0x44,0x44,0x00,},/* "M"45*/
{0x44,0x64,0x64,0x54,0x4c,0x4c,0x44,0x00,},/* "N"46*/
{0x38,0x44,0x44,0x44,0x44,0x44,0x38,0x00,},/* "O"47*/
{0x78,0x44,0x44,0x78,0x40,0x40,0x40,0x00,},/* "P"48*/
{0x38,0x44,0x44,0x44,0x54,0x48,0x34,0x00,},/* "Q"49*/
{0x78,0x44,0x44,0x78,0x50,0x48,0x44,0x00,},/* "R"50*/
{0x38,0x44,0x40,0x38,0x04,0x44,0x38,0x00,},/* "S"51*/
{0x7c,0x10,0x10,0x10,0x10,0x10,0x10,0x00,},/* "T"52*/
{0x44,0x44,0x44,0x44,0x44,0x44,0x38,0x00,},/* "U"53*/
{0x44,0x44,0x44,0x44,0x44,0x28,0x10,0x00,},/* "V"54*/
{0x44,0x44,0x44,0x54,0x54,0x6c,0x44,0x00,},/* "W"55*/
{0x44,0x44,0x28,0x10,0x28,0x44,0x44,0x00,},/* "X"56*/
{0x44,0x44,0x44,0x28,0x10,0x10,0x10,0x00,},/* "Y"57*/
{0x7c,0x04,0x08,0x10,0x20,0x40,0x7c,0x00,},/* "Z"58*/
{0x38,0x20,0x20,0x20,0x20,0x20,0x38,0x00,},/* "["59*/
{0x00,0x40,0x20,0x10,0x08,0x04,0x00,0x00,},/* "\"60*/
{0x38,0x08,0x08,0x08,0x08,0x08,0x38,0x00,},/* "]"61*/
{0x10,0x28,0x44,0x00,0x00,0x00,0x00,0x00,},/* "^"62*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x7c,0x00,},/* "_"63*/
{0x40,0x20,0x10,0x00,0x00,0x00,0x00,0x00,},/* "`"64*/
{0x00,0x00,0x38,0x04,0x3c,0x44,0x3c,0x00,},/* "a"65*/
{0x40,0x40,0x58,0x64,0x44,0x44,0x78,0x00,},/* "b"66*/
{0x00,0x00,0x38,0x44,0x40,0x44,0x38,0x00,},/* "c"67*/
{0x04,0x04,0x34,0x4c,0x44,0x44,0x3c,0x00,},/* "d"68*/
{0x00,0x00,0x38,0x44,0x7c,0x40,0x38,0x00,},/* "e"69*/
{0x08,0x14,0x10,0x38,0x10,0x10,0x10,0x00,},/* "f"70*/
{0x00,0x34,0x4c,0x4c,0x34,0x04,0x38,0x00,},/* "g"71*/
{0x40,0x40,0x58,0x64,0x44,0x44,0x44,0x00,},/* "h"72*/
{0x10,0x00,0x30,0x10,0x10,0x10,0x38,0x00,},/* "i"73*/
{0x08,0x00,0x18,0x08,0x08,0x48,0x30,0x00,},/* "j"74*/
{0x20,0x20,0x24,0x28,0x30,0x28,0x24,0x00,},/* "k"75*/
{0x30,0x10,0x10,0x10,0x10,0x10,0x38,0x00,},/* "l"76*/
{0x00,0x00,0x68,0x54,0x54,0x54,0x54,0x00,},/* "m"77*/
{0x00,0x00,0x58,0x64,0x44,0x44,0x44,0x00,},/* "n"78*/
{0x00,0x00,0x38,0x44,0x44,0x44,0x38,0x00,},/* "o"79*/
{0x00,0x58,0x64,0x64,0x58,0x40,0x40,0x00,},/* "p"80*/
{0x00,0x34,0x4c,0x4c,0x34,0x04,0x04,0x00,},/* "q"81*/
{0x00,0x00,0x58,0x64,0x40,0x40,0x40,0x00,},/* "r"82*/
{0x00,0x00,0x3c,0x40,0x78,0x04,0x7c,0x00,},/* "s"83*/
{0x20,0x20,0x70,0x20,0x20,0x24,0x18,0x00,},/* "t"84*/
{0x00,0x00,0x48,0x48,0x48,0x48,0x34,0x00,},/* "u"85*/
{0x00,0x00,0x44,0x44,0x44,0x28,0x10,0x00,},/* "v"86*/
{0x00,0x00,0x44,0x44,0x54,0x54,0x28,0x00,},/* "w"87*/
{0x00,0x00,0x44,0x28,0x10,0x28,0x44,0x00,},/* "x"88*/
{0x00,0x00,0x44,0x44,0x4c,0x34,0x04,0x38,},/* "y"89*/
{0x00,0x00,0x7c,0x08,0x10,0x20,0x7c,0x00,},/* "z"90*/
{0x08,0x10,0x10,0x20,0x10,0x10,0x08,0x00,},/* "{"91*/
{0x10,0x10,0x10,0x00,0x10,0x10,0x10,0x00,},/* "|"92*/
{0x20,0x10,0x10,0x08,0x10,0x10,0x20,0x00,},/* "}"93*/
{0x20,0x54,0x08,0x00,0x00,0x00,0x00,0x00,},/* "~"94*/
{0x7c,0x7c,0x7c,0x7c,0x7c,0x7c,0x7c,0x7c,},/* ""95*/
}; //注：本点阵字符模块向顺时针转了90°所以在逐一相与时要调整顺序。

//写数据到LCD数据总线
static void sendToLcdBus(char dat)
{
	/* configure the common data pins as output */
	/*
	LCD_TRIS_7 = 0;
	LCD_TRIS_6 = 0;
	LCD_TRIS_5 = 0;
	LCD_TRIS_4 = 0;
	LCD_TRIS_3 = 0;
	LCD_TRIS_2 = 0;
	LCD_TRIS_1 = 0;
	LCD_TRIS_0 = 0;*/
	//Nop();Nop();Nop();Nop();

	LCD_WRITE_7 = (unsigned int)((dat & 0x80)>>7);
    LCD_WRITE_6 = (unsigned int)((dat & 0x40)>>6);
	LCD_WRITE_5 = (unsigned int)((dat & 0x20)>>5);
	LCD_WRITE_4 = (unsigned int)((dat & 0x10)>>4);		
	LCD_WRITE_3 = (unsigned int)((dat & 0x08)>>3);
	LCD_WRITE_2 = (unsigned int)((dat & 0x04)>>2);
	LCD_WRITE_1 = (unsigned int)((dat & 0x02)>>1);
	LCD_WRITE_0 = (unsigned int)((dat & 0x01)>>0);
	
}
//从LCD 数据总线读数据
/*
static unsigned char readFromLcdBus(void)
{
	unsigned char temp[8];
	unsigned char data;
	LCD_TRIS_7 = 1;
    LCD_TRIS_6 = 1;
    LCD_TRIS_5 = 1;
    LCD_TRIS_4 = 1;
    LCD_TRIS_3 = 1;
    LCD_TRIS_2 = 1;
    LCD_TRIS_1 = 1;
    LCD_TRIS_0 = 1;
	//Nop();Nop();//Nop();Nop();
	temp[7] = (unsigned char) LCD_READ_7;
    temp[6] = (unsigned char) LCD_READ_6;
    temp[5] = (unsigned char) LCD_READ_5;
    temp[4] = (unsigned char) LCD_READ_4;
    temp[3] = (unsigned char) LCD_READ_3;
    temp[2] = (unsigned char) LCD_READ_2;
    temp[1] = (unsigned char) LCD_READ_1;
    temp[0] = (unsigned char) LCD_READ_0;

	LCD_TRIS_7 = 0;
	LCD_TRIS_6 = 0;
	LCD_TRIS_5 = 0;
	LCD_TRIS_4 = 0;
	LCD_TRIS_3 = 0;
	LCD_TRIS_2 = 0;
	LCD_TRIS_1 = 0;
	LCD_TRIS_0 = 0;
	
	data = (temp[7] << 7);
    data |= (temp[6] << 6);
    data |= (temp[5] << 5);
    data |= (temp[4] << 4);
    data |= (temp[3] << 3);
    data |= (temp[2] << 2);
    data |= (temp[1] << 1);
    data |= (temp[0]);
	
	return data;
	
}*/
//判断LCD 是否忙
static void BusyXLCD(void)
{
	int i=0;
	sendToLcdBus(0xff);
	LCD_WRITE_A0 = 0;
	//Nop();Nop();Nop();Nop();
	LCD_WRITE_WR = 1;
	//Nop();Nop();Nop();Nop();
	LCD_WRITE_RD = 0;
	LCD_TRIS_6 = 1;
	//Nop();Nop();//Nop();Nop();
	while((LCD_READ_6==1) && i++<200);
	//Nop();Nop();
	LCD_WRITE_RD = 1;
	//Nop();Nop();Nop();Nop();
	LCD_TRIS_6 = 0;
}

/*******************************************************************
Function Name :         WriteCmdXLCD
Description:            This function write a command to the 
                        Instruction Register of the LCD controller.
                        The user must first check if the controller 
                        is busy or not by calling the BusyXLCD()
                        function.
Input parameters:       char cmd
Return value:           void
********************************************************************/
static void WriteCmdXLCD(unsigned char cmd)
{
	BusyXLCD();
	LCD_WRITE_A0 = 1;
	LCD_WRITE_RD = 1;
	//Nop();Nop();Nop();Nop();
	sendToLcdBus(cmd);
	//Nop();Nop();Nop();Nop();
	LCD_WRITE_WR = 0;
	//Nop();Nop();Nop();Nop();Nop();Nop();
	LCD_WRITE_WR = 1;
	//Nop();Nop();Nop();Nop();
	
}  /* end of function */

/*******************************************************************
Function Name:            WriteDataXLCD
Description:              This function writes a data byte into the 
                          DDRam/CGRam of the LCD controller.The user
                          must first check the busy  status of the 
                          LCD controller  by calling the BusyXLCD()
                          function.The data written can go to the 
                          DDRam or CGRam depending on the previous
                          SetXXRamAddr( char) that was  called.
Input parameters:         char data
Return value:             void
********************************************************************/
static void WriteDataXLCD( char data)
{
	BusyXLCD();
	LCD_WRITE_A0 = 0;
	LCD_WRITE_RD = 1;
	//Nop();Nop();Nop();Nop();
	sendToLcdBus(data);
	//Nop();Nop();Nop();Nop();
	LCD_WRITE_WR = 0;
	//Nop();Nop();Nop();Nop();Nop();Nop();
	LCD_WRITE_WR = 1;
	//Nop();Nop();Nop();Nop();
}  /* end of function */
/*
static void WriteWordXLCD(unsigned int dat)
{
	WriteDataXLCD((unsigned char)dat);
	WriteDataXLCD((unsigned char)(dat>>8));
}
*/
/*******************************************************************
Function Name   :  ReadDataXLCD
Description     :  This function read the data byte from the 
                   LCD controller. The user must first check 
                   the busy status of the LCD controller by 
                   calling the BusyXLCD() function.The data 
                   read can be from DDRam or CGRam  depending 
                   on the previous SetXXRamAddr( char) that was
                   called.
Input parameters:  none
Return value    :  char data
********************************************************************/
/*
static unsigned char ReadDataXLCD(void)
{
	unsigned char data;
	LCD_WRITE_A0 = 1;
	LCD_WRITE_WR = 1;
	Nop();Nop();Nop();Nop();
	LCD_WRITE_RD = 0;
	Nop();Nop();Nop();Nop();
	data = readFromLcdBus();
	Nop();Nop();Nop();Nop();
	LCD_WRITE_RD = 1;
	Nop();Nop();Nop();Nop();
	return data;
} // end of function 
*/

/*******************************************************************
Function Name:          OpenXLCD
Description:            This function configure the IO pins  
                        and initializes the LCD controller
                        the lcdtype should contain data on the type 
                        of interface and number of lines of display.
Input parameters:       char lcdtype 
Return value:           none
********************************************************************/
//配置LCD控制引脚
static void LCD_Open(void)
{
    ANSELCbits.ANSC13=0;ANSELCbits.ANSC14=0;ANSELDbits.ANSD7=0;ANSELEbits.ANSE0=0;ANSELEbits.ANSE1=0;
    ANSELEbits.ANSE2=0;ANSELEbits.ANSE3=0;ANSELEbits.ANSE4=0;ANSELEbits.ANSE5=0;ANSELEbits.ANSE6=0;
    ANSELEbits.ANSE7=0;ANSELGbits.ANSG6=0;
	//配置LCD接口
	LCD_WRITE_A0 = LCD_WRITE_CS = LCD_WRITE_RD = LCD_WRITE_RST = LCD_WRITE_WR = 1;
	LCD_WRITE_BK = 0;
	LCD_TRIS_A0 = LCD_TRIS_BK = LCD_TRIS_CS = LCD_TRIS_RD = LCD_TRIS_RST = LCD_TRIS_WR = 0;
	
    LCD_WRITE_RST = 1;
    LCD_WRITE_CS = 0;
    LCD_WRITE_BK = 0;

	LCD_TRIS_7 = 0;
	LCD_TRIS_6 = 0;
	LCD_TRIS_5 = 0;
	LCD_TRIS_4 = 0;
	LCD_TRIS_3 = 0;
	LCD_TRIS_2 = 0;
	LCD_TRIS_1 = 0;
	LCD_TRIS_0 = 0;
}

//写一个命令，然后写一个数据
static void LCD_Config_byte(unsigned char cmd,unsigned char dat)
{
    WriteCmdXLCD(cmd);
    WriteDataXLCD(dat);
}
//写一个命令，然后写两个数据
static void LCD_Config_Word(unsigned char cmd,unsigned int dat)
{
    WriteCmdXLCD(cmd);
    WriteDataXLCD(dat);
    WriteDataXLCD(dat>>8);
}
//写一个命令，然后写DatLen个数据
/*
static void LCD_Config_bytes(unsigned char cmd,const unsigned char *pDat,int DatLen)
{
    WriteCmdXLCD(cmd);
    for(;0!=DatLen;DatLen--)
    {
        WriteDataXLCD(*pDat);
        pDat++;
    }
}*/
//初始化
static void InitLcdSystemCmd(void)
{
	WriteCmdXLCD(SYSTEM_SET);
	WriteDataXLCD(SYSTEM_SET_P1);
	WriteDataXLCD(SYSTEM_SET_P2);
	WriteDataXLCD(SYSTEM_SET_P3);
	WriteDataXLCD(SYSTEM_SET_P4);
	WriteDataXLCD(SYSTEM_SET_P5);
	WriteDataXLCD(SYSTEM_SET_P6);
	WriteDataXLCD(SYSTEM_SET_P7);
	WriteDataXLCD(SYSTEM_SET_P8);
}
static void InitLcdScrollCmd(void)
{
	WriteCmdXLCD(SCROLL);
	WriteDataXLCD(SCROLL_P1);
	WriteDataXLCD(SCROLL_P2);
	WriteDataXLCD(SCROLL_P3);
	WriteDataXLCD(SCROLL_P4);
	WriteDataXLCD(SCROLL_P5);
	WriteDataXLCD(SCROLL_P6);
	WriteDataXLCD(SCROLL_P7);
	WriteDataXLCD(SCROLL_P8);
	WriteDataXLCD(SCROLL_P9);
	WriteDataXLCD(SCROLL_P10);
	
}
void init_LCD(void)
{
    //unsigned char SystemSetting[] ={0x30,0x87,0x07,0x27,0x3a,0xef,0x28,0x00};
   // unsigned char ScrollSetting[] = {0x00,0x00,0xf0,0xb0,0x04,0xf0,0x30,0x2a,0xb0,0x4f};
    LCD_Open();
	//Delay10ms();
    LCD_Config_byte(DISP_OFF,DSP_OFF_VALUE);
    InitLcdSystemCmd();
    InitLcdScrollCmd();
    LCD_Config_byte(HDOT_SCR,HDOT_SCR_VALUE);
    LCD_Config_byte(OVLAY,OVLAY_VALUE);
    LCD_Config_Word(CSR_FORM,CSR_FORM_VALUE);
    WriteCmdXLCD(CSR_DIR_RIGHT);
    LCD_Config_byte(DISP_ON,DSP_ON_VALUE);
	Nop();Nop();
	clear_All_RAM();
	LCD_WRITE_BK = 1;
}

//填充文本区
void fillTextRAM(char data)
{
	unsigned int i;
	LCD_Config_Word(CSRW,TEXT_BASEADDR);
	WriteCmdXLCD(MWRITE);
	for(i=0;i<TEXT_LENGTH;i++)
		WriteDataXLCD(data);
}

//填充图形区
void fillGraphicRAM(char data)
{
	unsigned int i;
	LCD_Config_Word(CSRW,GRAPHIC_BASEADDR);
	WriteCmdXLCD(MWRITE);
	for(i=0;i<GRAPHIC_LENGTH;i++)
		WriteDataXLCD(data);
}
//row--0~239
//col--0~39
//
void clearGraphicRam(int row,int col,int width,int height)
{
	int addrOffset = GRAPHIC_BASEADDR + row *BYTES_PER_ROW + col;
	int addr;
	int rowIndex,colIndex;
	for(rowIndex = 0;rowIndex<height;rowIndex++)
	{
		addr=addrOffset + rowIndex * BYTES_PER_ROW;
		LCD_Config_Word(CSRW,addr);
		WriteCmdXLCD(MWRITE);
		for(colIndex=0;colIndex<width;colIndex++)
			WriteDataXLCD(0x00);
	}
}
void clearTextRam(int row,int col,int width,int height)
{
	int addrOffset = TEXT_BASEADDR+ row *BYTES_PER_ROW + col;
	int addr;
	int rowIndex,colIndex;
	for(rowIndex = 0;rowIndex<height;rowIndex++)
	{
		addr=addrOffset + rowIndex * BYTES_PER_ROW;
		LCD_Config_Word(CSRW,addr);
		WriteCmdXLCD(MWRITE);
		for(colIndex=0;colIndex<width;colIndex++)
			WriteDataXLCD(0x00);
	}
}

void clear_All_RAM(void)
{
	fillTextRAM(0x00);
	fillGraphicRAM(0x00);
}

//..........填充显示RAM..........
void fill_All_RAM(void) 
{
	fillTextRAM(0xff);
	fillGraphicRAM(0xff);
}
//..........显示16点阵汉字..........
//row ----0~239
//col ----0~39
// Inv:反显控制
static void LCD_WriteMatrix_16X16(char *pMatrix,int row,int col,BOOL Inv)
{
	int i;
	unsigned int addr_offset;
	char data;
	for(i=0;i<16;i++)
	{
		addr_offset = BYTES_PER_ROW * (row + i) + col;
		LCD_Config_Word(CSRW,GRAPHIC_BASEADDR + addr_offset);//写入地址
		WriteCmdXLCD(MWRITE);
		data = *pMatrix;
		data = Inv?~data:data;
		WriteDataXLCD(data);
		pMatrix++;
		data = *pMatrix;
		data = Inv?~data:data;
		WriteDataXLCD(data);
		pMatrix++;
	}
}

//..........显示32点阵汉字..........
//row ----0~239
//col ----0~39
// Inv:反显控制
static void LCD_WriteMatrix_32X32(char *pMatrix,int row,int col,BOOL Inv)
{
	int i;
	unsigned int addr_offset;
	char data;
	for(i=0;i<32;i++)
	{
		addr_offset = BYTES_PER_ROW * (row + i) + col;
		LCD_Config_Word(CSRW,GRAPHIC_BASEADDR + addr_offset);//写入地址
		WriteCmdXLCD(MWRITE);
		data = *pMatrix;
		data = Inv?~data:data;
		WriteDataXLCD(data);
		pMatrix++;
		data = *pMatrix;
		data = Inv?~data:data;
		WriteDataXLCD(data);
		pMatrix++;
		data = *pMatrix;
		data = Inv?~data:data;
		WriteDataXLCD(data);
		pMatrix++;
		data = *pMatrix;
		data = Inv?~data:data;
		WriteDataXLCD(data);
		pMatrix++;
	}
}

//..........写16*8 点阵..........
//row ----0~14
//col ----0~39
// Inv:反显控制
static void LCD_WriteMatrix_16X8(char *pMatrix,int row,int col,BOOL Inv)
{
	int i;
	unsigned int addr_offset=BYTES_PER_ROW * row + col;
	char data;
	
	for(i=0;i<16;i++)
	{
		LCD_Config_Word(CSRW,GRAPHIC_BASEADDR + addr_offset);//写入地址
		WriteCmdXLCD(MWRITE);
		data = *pMatrix;
		data = Inv?~data:data;
		WriteDataXLCD(data);
		pMatrix++;
		addr_offset += BYTES_PER_ROW;
	}
}

static void LCD_WriteText_8X8(char wrData,int row,int col)
{
	int addr_offset = BYTES_PER_ROW * row + col;
	LCD_Config_Word(CSRW,TEXT_BASEADDR+ addr_offset);//写入地址
	WriteCmdXLCD(MWRITE);
	WriteDataXLCD(wrData);
}
//row ----0~239
//col ----0~39
// Inv:反显控制

void LCD_WriteCharRow_16_8(char *pData,int row,int col,BOOL Inv)
{

	//显示一行英文字符
	int pos;
	while((*pData)!='\0')
	{
		pos = *pData-' ';
		LCD_WriteMatrix_16X8(&Char16_8[pos][0],row,col,Inv);
		col++;
		pData++;
	}
}
//..........写16*8 点阵..........
//row ----0~(240-8)
//col ----0~39
// Inv:反显控制

void LCD_WriteMatrix_8X8(char *pData,int row,int col,BOOL Inv)
{
	int i;
	unsigned int addr_offset=BYTES_PER_ROW * row + col;
	char data;
	
	for(i=0;i<8;i++)
	{
		LCD_Config_Word(CSRW,GRAPHIC_BASEADDR + addr_offset);//写入地址
		WriteCmdXLCD(MWRITE);
		data = *pData;
		data = Inv?~data:data;
		WriteDataXLCD(data);
		pData++;
		addr_offset += BYTES_PER_ROW;
	}
}
void LCD_WriteCharRow_8_8(char *pData,int row,int col,BOOL Inv)
{
	int pos;
	while((*pData)!='\0')
	{
		pos = *pData-' ';
		LCD_WriteMatrix_8X8(&ASCIITAB[pos][0],row,col,Inv);
		col++;
		pData++;
	}
}

void LCD_WriteCharRow(char wrData,int row,int col,int length)
{
	int addr_offset = BYTES_PER_ROW * row + col;
	length = (col+length > SCREEN_CHAR_COL)?(SCREEN_CHAR_COL- col):length;
	LCD_Config_Word(CSRW,TEXT_BASEADDR+ addr_offset);//写入地址
	WriteCmdXLCD(MWRITE);
	while(0!=length)
	{
		WriteDataXLCD(wrData);
		length--;
	}
}
//显示一列英文字符
void LCD_WriteCharColumn(char wrData,int row,int col,int length)
{
	int addr_offset=0;
	int i;
	length = (row+length > SCREEN_CHAR_ROW)?(SCREEN_CHAR_ROW - row):length;
	for(i=0;i<length;i++)
	{
		addr_offset = BYTES_PER_ROW * (row+i) + col;
		LCD_Config_Word(CSRW,TEXT_BASEADDR+ addr_offset);//写入地址
		WriteCmdXLCD(MWRITE);
		WriteDataXLCD(wrData);
	}
}
//row ----0~239
//col ----0~39
void LCD_WriteMatrixRow(char **pMatrix,int row,int col,int length,BOOL Inv)
{
	int i;
	for(i=0;i<length;i++)
	{
		LCD_WriteMatrix_16X16(*(pMatrix+i),row,col+i*2,Inv);
	}
}
//row ----0~239
//col ----0~39
void LCD_WriteMatrix32Row(char **pMatrix,int row,int col,int length,BOOL Inv)
{
	int i;
	for(i=0;i<length;i++)
	{
		LCD_WriteMatrix_32X32(*(pMatrix+i),row,col+i*4,Inv);
	}
}
//row ----0~239
//col ----0~39

void LCD_WriteBlankSpace(int row,int col,int width,int height,BOOL inv)
{
	int realWidth = (width <=(SCREEN_CHAR_COL-col))?width:(SCREEN_WIDTH-col);
	int realHeight =(height <=(SCREEN_HEIGHT-row))?height:(SCREEN_HEIGHT-row);
	char temp=inv?0xff:0x00;
	int i,j;
	unsigned int addr_offset;
	for(i=0;i<realHeight;i++)
	{
		addr_offset = BYTES_PER_ROW * (row + i) + col;
		LCD_Config_Word(CSRW,GRAPHIC_BASEADDR + addr_offset);//写入地址
		WriteCmdXLCD(MWRITE);
		for(j=0;j<realWidth;j++)
		{
			WriteDataXLCD(temp);
		}
	}
}

void LCD_WriteTextRow(char *pData,int row,int col,int length)
{
	int i;
	for(i=0;i<length;i++)
	{
		LCD_WriteText_8X8(*(pData+i),row,col+i);
	}
}
void LCD_WriteMatrixScreen(const char *pMatrix)
{
	int i,j;
	LCD_Config_Word(CSRW,GRAPHIC_BASEADDR);
	WriteCmdXLCD(MWRITE);
	for(i=0;i<240;i++)
	{
		for(j=0;j<40;j++)
			WriteDataXLCD(~(*(pMatrix + ((i*40)+j))));
	}
}
//RowPixel----0~239
//ColPixel----0~319
void drawHorizontalSolidLine(int RowPixel,int ColPixel,int LenPixel)
{
	int CompletBytes,LeftBit;
	int realLen = (ColPixel+LenPixel)>SCREEN_WIDTH? (SCREEN_WIDTH-ColPixel):LenPixel;//320
	int startColumn = ColPixel / CHAR_WIDTH;//0
	int startBitNum = ColPixel % CHAR_WIDTH;//0
	unsigned int addr_offset = RowPixel * BYTES_PER_ROW + startColumn;//0
	LCD_Config_Word(CSRW,GRAPHIC_BASEADDR + addr_offset);
	WriteCmdXLCD(MWRITE);
	if(0!=startBitNum)
	{
		WriteDataXLCD(0xff >> startBitNum);
		realLen = realLen - (CHAR_WIDTH - startBitNum);//320
	}
	CompletBytes = realLen / CHAR_WIDTH;//40
	LeftBit = realLen % CHAR_WIDTH;//0
	while(0 != CompletBytes)
	{
		WriteDataXLCD(0xff);
		CompletBytes--;
	}
	if(0!=LeftBit)
	{
		WriteDataXLCD(~(0xff>>LeftBit));
	}
}

void drawVerticalSolidLine(int RowPixel,int ColPixel,int LenPixel)
{
	int i;
	int startColumn = ColPixel / CHAR_WIDTH;
	int pixelBit = ColPixel % CHAR_WIDTH;
	char data = (0x80>>pixelBit);
	int realLen = (RowPixel + LenPixel)>SCREEN_WIDTH?(SCREEN_HEIGHT - RowPixel):LenPixel;
	for(i=0;i<realLen;i++)
	{
		LCD_Config_Word(CSRW,GRAPHIC_BASEADDR + (RowPixel+i) * BYTES_PER_ROW + startColumn);
		WriteCmdXLCD(MWRITE);
		WriteDataXLCD(data);
	}
}

void drawFrame(int row,int col,int width,int height)
{
	
	drawVerticalSolidLine(row,col,height);
	drawVerticalSolidLine(row,col+width-1,height);
	drawHorizontalSolidLine(row,col,width);
	drawHorizontalSolidLine(row+height-1,col,width);
}


void ConvertTimeToString(char strDate[20])
{

	strDate[0]='2';
	strDate[1]='0';
	strDate[2]=PCF8563_Date.YearH + 0x30;
	strDate[3]=PCF8563_Date.YearL + 0x30;
	strDate[4]='-';
	strDate[5]=PCF8563_Date.MonthH + 0x30;
	strDate[6]=PCF8563_Date.MonthL + 0x30;
	strDate[7]='-';
	strDate[8]=PCF8563_Date.DayH + 0x30;
	strDate[9]=PCF8563_Date.DayL + 0x30;
	strDate[10]=' ';
	strDate[11]=PCF8563_Date.HourH + 0x30;
	strDate[12]=PCF8563_Date.HourL + 0x30;
	strDate[13]=':';
	strDate[14]=PCF8563_Date.MinuteH + 0x30;
	strDate[15]=PCF8563_Date.MinuteL + 0x30;
	strDate[16]=':';
	strDate[17]=PCF8563_Date.SecondH + 0x30;
	strDate[18]=PCF8563_Date.SecondL + 0x30;
	strDate[19]='\0';
}
static void disSlaveAddr (void)
{
    int i,j;
    char k=1;
    char str[10]={'0','0','\0'};
    for(i=0;i<10;i++)
    {
        for(j=0;j<4;j++)
        {
            sprintf(str,"%02d",k);
            LCD_WriteCharRow_16_8(str,4+i*20,0+j*10,FALSE);
            LCD_WriteCharRow_16_8(":",4+i*20,2+j*10,FALSE);
            k++;
        }
    }
    //LCD_WriteCharRow_16_8("40",212,1,FALSE);
}
void init_Display(void)
{
    clear_All_RAM();
    //drawFrame(0,0,320,240);
    disSlaveAddr();
    //drawHorizontalSolidLine(168,0,320);
    drawVerticalSolidLine(208,112,32);
    drawFrame(208,0,320,32);
    LCD_WriteCharRow_16_8("INV:   MIN",216,1,FALSE);
    //LCD_WriteCharRow_16_8("",216,6,FALSE);
    LCD_WriteCharRow_16_8("TIME:",216,15,FALSE);
}

void dis_refresh(void)
{
    int i,j;
    char k=0;
    char str[20]={'0','0','\0'};
    for(i=0;i<10;i++)
        {
            for(j=0;j<4;j++)
            {
                if(slaveOffline[k]==0x01)//掉线
                {
                    LCD_WriteCharRow_16_8("NC   ",4+i*20,4+j*10,FALSE);
                }
                else
                {
                    sprintf(str,"%-5d",gCurSysRecord.slavePulse[k]);
                    LCD_WriteCharRow_16_8(str,4+i*20,4+j*10,gCurSysRecord.slaveLight[i*4+j]);
                }
                k++;
            }
        }
	ConvertTimeToString(str);
	LCD_WriteCharRow_16_8(str,216,20,FALSE);
	sprintf(str,"%-2d",gCurSysRecord.loopTime);
	LCD_WriteCharRow_16_8(str,216,6,FALSE);
	/*
        if(getIndTaskRun(IND_PBUS_SHORTCIRCUIT))
        {
            LCD_WriteCharRow_16_8("SHORT ",216,6,FALSE);
        }
        else
        {
            LCD_WriteCharRow_16_8("NORMAL",216,6,FALSE);
        }
        */
}
